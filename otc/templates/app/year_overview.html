{% extends 'base.html' %}
{% load utils %}

{% block title %}Jahresübersicht{% endblock %}

{% block navigation_bar %}
{% if user.is_authenticated %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="https://www.ockenheimer-tennisclub.de/" target="_blank">Ockenheimer Tennisclub
        e.V.</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'show_depts' %}">Meine Reservierungen</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'year_overview' %}">Jahresübersicht</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'password_change' %}">Passwort ändern</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'logout' %}">Logout</a>
            </li>
        </ul>
    </div>
</nav>
{% endif %}
{% endblock %}

{% block content %}
{% if user.is_authenticated %}

<br/>
<div class="container">
    <div class="row">
        <div class="col-auto mr-auto">
            <h2>
                Jahresübersicht
                <small>allgemeine Veranstaltungen</small>
            </h2>
        </div>
        <div class="col-auto">
            <a href="{% url 'index' %}" class="btn btn-secondary active" data-toggle="tooltip"
               data-placement="right" role="button" aria-pressed="true">zurück</a>
        </div>
    </div>
    <br/>

    <div class="row">
        <div class="col-sm">
            <table class="table-responsive table" border="0" cellpadding="0" cellspacing="0">
                <tr>
                    <th>Datum</th>
                    <th>Uhrzeit</th>
                    <th>Event</th>
                </tr>
                {% for month in event_months_dic %}
                <tr>
                    <th style="background-color: #F2F3F3">{{ month|format_month }}</th>
                    <th style="background-color: #F2F3F3"></th>
                    <th style="background-color: #F2F3F3"></th>
                </tr>
                {% for event in event_months_dic|get_item:month %}
                <tr>
                    <td width="130" height="20">
                        {{ event.day }}
                    </td>
                    <td width="80" height="20">
                        {{ event.start_time }}
                    </td>
                    <td width="300" height="20">
                        {{ event.title }}
                    </td>
                </tr>
                {% endfor %}
                {% endfor %}
            </table>
        </div>
    </div>

</div>
{% else %}
{% include "not_registered.html" %}
{% endif %}

{% endblock %}