{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}Reservierungsdetails{% endblock %}


{% block navigation_bar %}
{% if user.is_authenticated %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="https://www.ockenheimer-tennisclub.de/" target="_blank">Ockenheimer Tennisclub
        e.V.</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'password_change' %}">Passwort ändern</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'logout' %}">Logout</a>
            </li>
        </ul>
    </div>
</nav>
{% endif %}
{% endblock %}

{% block content %}
{% if user.is_authenticated %}
<br/>
<tr class="container">
    <table>
        {% for event in events %}
        <tr>
            <td>
                Reservierung
                <small class="text-muted">{{ event.day }}</small>
            </td>

            <td>
                - {{ event.title }} -
            </td>
            <td>Spieler:
                {% if players %}
                {% for p in players %}
                {{ p }}
                {% endfor %}
                {% endif %}
            </td>
            <td>
                <p>Typ: {{ event.type }}</p>
            </td>
            <td>
                <p>Beginn: {{ event.start_time }} Uhr</p>
            </td>
            <td>
                <p>Dauer: {{ event.duration }} Stunde/n</p>
            </td>
            <td>
                <p>Platznummer: {{ event.number }}</p>
            </td>
            <td>Externe: {% if event.externPlayer1 %}{{ event.externPlayer1 }}{% endif %}
                {% if event.externPlayer2 %}{{ event.externPlayer2 }}{% endif %}
                {% if event.externPlayer3 %}{{ event.externPlayer3 }}{% endif %}
                {% if not event.externPlayer1 and not event.externPlayer2 and not event.externPlayer3 %}
                / {% endif %}
            </td>
            <td>
                <p>Notizen: {% if event.notes %}{{ event.notes }}{% else %} / {% endif %}</p>
            </td>
        </tr>
        {% endfor %}
    </table>
    </div>
    <p style="font-weight: 700;"> Bisher {{ exts }} Externe Spieler, also 5€ x {{exts}} = {{sum}}€ (vorraussichtlich am Ende der Saison zu bezahlen)</p>
    {% else %}
    {% include "not_registered.html" %}

    {% endif %}
    {% endblock %}
